<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Service Value Chain Dashboard - foo.com</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Amazon Ember', 'Helvetica Neue', Helvetica, Arial, sans-serif;
            background: #232f3e;
            color: #eaeded;
            padding: 20px;
        }

        .dashboard {
            max-width: 1800px;
            margin: 0 auto;
        }

        h1 {
            font-size: 24px;
            font-weight: 400;
            margin-bottom: 10px;
            color: #ffffff;
        }

        .subtitle {
            font-size: 14px;
            color: #aab7b8;
            margin-bottom: 30px;
        }

        .journey-step {
            background: #16191f;
            border: 1px solid #3f4f5f;
            border-radius: 4px;
            padding: 20px;
            margin-bottom: 30px;
            display: flex;
            gap: 25px;
        }

        .step-narrative {
            flex: 0 0 220px;
            padding-right: 25px;
            border-right: 2px solid #3f4f5f;
        }

        .step-number {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .step-badge {
            display: inline-block;
            background: #ec7211;
            color: white;
            padding: 4px 12px;
            border-radius: 3px;
            font-size: 12px;
            font-weight: 700;
        }

        .step-title {
            font-size: 16px;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 12px;
            line-height: 1.4;
        }

        .step-description {
            font-size: 13px;
            line-height: 1.6;
            color: #aab7b8;
        }

        .step-content {
            flex: 1;
            min-width: 0;
        }

        .graphs-container {
            display: flex;
            gap: 20px;
        }

        .hero-graph {
            flex: 0 0 45%;
            min-width: 0;
        }

        .dependency-graphs {
            flex: 1;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            min-width: 0;
        }

        .graph-card {
            background: #0f1419;
            border: 1px solid #2a3441;
            border-radius: 3px;
            padding: 12px;
        }

        .graph-title {
            font-size: 12px;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 4px;
        }

        .graph-value {
            font-size: 20px;
            font-weight: 300;
            margin-bottom: 8px;
        }

        .graph-value.healthy {
            color: #1d8102;
        }

        .graph-value.warning {
            color: #ff9900;
        }

        .graph-value.alert {
            color: #d13212;
        }

        .graph-svg {
            width: 100%;
            height: 200px;
            background: #000000;
            border: 1px solid #1a1a1a;
        }

        .hero-graph .graph-svg {
            height: 280px;
        }

        .dependency-graphs .graph-svg {
            height: 100px;
        }

        .legend {
            display: flex;
            gap: 12px;
            margin-top: 8px;
            font-size: 10px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .legend-line {
            width: 16px;
            height: 2px;
        }

        .metric-line {
            stroke: #1d8102;
        }

        .warn-line {
            stroke: #ff9900;
            stroke-dasharray: 4,4;
        }

        .alert-line {
            stroke: #d13212;
            stroke-dasharray: 4,4;
        }

        .grid-line {
            stroke: #1a1a1a;
            stroke-width: 1;
        }

        .axis-label {
            fill: #687078;
            font-size: 9px;
        }

        .threshold-label {
            font-size: 8px;
            font-weight: 600;
        }

        .warn-label {
            fill: #ff9900;
        }

        .alert-label {
            fill: #d13212;
        }

        .deployment-line {
            stroke: #5dade2;
            stroke-width: 2;
            opacity: 0.7;
        }

        .traffic-light {
            display: inline-flex;
            gap: 3px;
            align-items: center;
            padding: 4px 6px;
            background: #0f1419;
            border: 1px solid #3f4f5f;
            border-radius: 3px;
        }

        .traffic-light-circle {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            border: 1px solid #3f4f5f;
            opacity: 0.3;
        }

        .traffic-light-circle.red {
            background: #d13212;
        }

        .traffic-light-circle.yellow {
            background: #ff9900;
        }

        .traffic-light-circle.green {
            background: #1d8102;
        }

        .traffic-light-circle.active {
            opacity: 1;
            box-shadow: 0 0 4px currentColor;
        }

        .architecture-description {
            font-size: 13px;
            line-height: 1.5;
            color: #aab7b8;
            margin: 15px 0;
            padding: 12px;
            background: #0f1419;
            border-left: 3px solid #ec7211;
            border-radius: 3px;
        }

        .architecture-diagram {
            margin: 15px 0;
            padding: 15px;
            background: #0f1419;
            border-radius: 3px;
        }

        .architecture-diagram rect {
            fill: #0f1419;
            fill-opacity: 0.8;
        }

        .metric-description {
            font-size: 10px;
            font-style: italic;
            color: #687078;
            margin-top: 2px;
            line-height: 1.3;
        }

        .recent-events {
            margin: 15px 0;
            padding: 12px;
            background: #0f1419;
            border: 1px solid #2a3441;
            border-radius: 3px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 11px;
            line-height: 1.6;
            color: #aab7b8;
            white-space: pre-line;
        }

        .recent-events-title {
            font-size: 11px;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 8px;
            font-family: 'Amazon Ember', 'Helvetica Neue', Helvetica, Arial, sans-serif;
        }

        /* Light mode styles */
        @media (prefers-color-scheme: light) {
            body {
                background: #f0f2f5;
                color: #1a1a1a;
            }

            h1 {
                color: #232f3e;
            }

            .subtitle {
                color: #5a6c7d;
            }

            .journey-step {
                background: #ffffff;
                border: 1px solid #d5dbdb;
            }

            .step-narrative {
                border-right: 2px solid #d5dbdb;
            }

            .step-title {
                color: #232f3e;
            }

            .step-description {
                color: #5a6c7d;
            }

            .graph-card {
                background: #fafbfc;
                border: 1px solid #d5dbdb;
            }

            .graph-title {
                color: #232f3e;
            }

            .graph-value.healthy {
                color: #0d6002;
            }

            .graph-value.warning {
                color: #dd6b10;
            }

            .graph-value.alert {
                color: #a41e11;
            }

            .graph-svg {
                background: #ffffff;
                border: 1px solid #d5dbdb;
            }

            .grid-line {
                stroke: #e3e8e8;
                stroke-width: 1;
            }

            .axis-label {
                fill: #5a6c7d;
                font-size: 9px;
            }

            .metric-line {
                stroke: #0d6002;
            }

            .warn-line {
                stroke: #dd6b10;
            }

            .alert-line {
                stroke: #a41e11;
            }

            .warn-label {
                fill: #dd6b10;
            }

            .alert-label {
                fill: #a41e11;
            }

            .deployment-line {
                stroke: #0073bb;
                stroke-width: 2;
                opacity: 0.6;
            }

            .traffic-light-circle {
                border: 1px solid #d5dbdb;
            }

            .traffic-light-circle.red {
                background: #a41e11;
            }

            .traffic-light-circle.yellow {
                background: #f9c74f;
            }

            .traffic-light-circle.green {
                background: #0d6002;
            }

            .architecture-description {
                color: #5a6c7d;
                background: #fafbfc;
                border-left: 3px solid #d5dbdb;
            }

            .architecture-diagram {
                background: #fafbfc;
            }

            .architecture-diagram rect {
                fill: #fafbfc;
                fill-opacity: 0.8;
            }

            .metric-description {
                color: #5a6c7d;
            }

            .traffic-light {
                background: #fafbfc;
                border: 1px solid #d5dbdb;
            }

            .recent-events {
                background: #fafbfc;
                border: 1px solid #d5dbdb;
                color: #5a6c7d;
            }

            .recent-events-title {
                color: #232f3e;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard">
        <h1>foo.com Operational Dashboard</h1>
        <div class="subtitle">Service Value Chain - Last 6 hours - US-EAST-2</div>

        <!-- Step 1: Customer Discovery -->
        <div class="journey-step">
            <div class="step-narrative">
                <div class="step-number">
                    <span class="step-badge">STEP 1</span>
                    <div class="traffic-light">
                        <div class="traffic-light-circle red"></div>
                        <div class="traffic-light-circle yellow"></div>
                        <div class="traffic-light-circle green active"></div>
                    </div>
                </div>
                <div class="step-title">Customer Discovery</div>
                <div class="step-description">
                    Customers discover foo.com through search engines, ads, or referrals. They land on our homepage or category pages and begin exploring our camping gear offerings.
                </div>
            </div>

            <div class="step-content">
                <div class="graphs-container">
                    <div class="hero-graph">
                        <div class="graph-card">
                            <div class="graph-title">Landing Page Traffic</div>
                            <div class="graph-value healthy">4,127 /min</div>
                            <svg class="graph-svg" viewBox="0 0 600 280">
                                <line x1="50" y1="30" x2="580" y2="30" class="grid-line"/>
                                <line x1="50" y1="80" x2="580" y2="80" class="grid-line"/>
                                <line x1="50" y1="130" x2="580" y2="130" class="grid-line"/>
                                <line x1="50" y1="180" x2="580" y2="180" class="grid-line"/>
                                <line x1="50" y1="230" x2="580" y2="230" class="grid-line"/>

                                <text x="45" y="235" text-anchor="end" class="axis-label">3000</text>
                                <text x="45" y="185" text-anchor="end" class="axis-label">3600</text>
                                <text x="45" y="135" text-anchor="end" class="axis-label">4200</text>
                                <text x="45" y="85" text-anchor="end" class="axis-label">4800</text>
                                <text x="45" y="35" text-anchor="end" class="axis-label">5400</text>

                                <line x1="50" y1="217" x2="580" y2="217" class="alert-line" stroke-width="2"/>
                                <text x="582" y="220" class="threshold-label alert-label">3200</text>

                                <line x1="50" y1="192" x2="580" y2="192" class="warn-line" stroke-width="2"/>
                                <text x="582" y="195" class="threshold-label warn-label">3600</text>

                                <polyline fill="none" class="metric-line" stroke-width="2"
                                    points="50,138 80,132 110,136 140,130 170,135 200,132 230,138 260,134 290,131 320,137 350,133 380,138 410,133 440,136 470,132 500,137 530,135 560,138 580,136"/>

                                <!-- Deployment markers -->
                                <line x1="271" y1="30" x2="271" y2="250" class="deployment-line"/>
                                <line x1="470" y1="30" x2="470" y2="250" class="deployment-line"/>

                                <text x="80" y="260" text-anchor="middle" class="axis-label">00:00</text>
                                <text x="200" y="260" text-anchor="middle" class="axis-label">02:00</text>
                                <text x="320" y="260" text-anchor="middle" class="axis-label">04:00</text>
                                <text x="440" y="260" text-anchor="middle" class="axis-label">06:00</text>
                                <text x="560" y="260" text-anchor="middle" class="axis-label">now</text>
                            </svg>
                            <div class="legend">
                                <div class="legend-item">
                                    <div class="legend-line" style="background: #1d8102;"></div>
                                    <span>Current</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-line" style="background: #ff9900;"></div>
                                    <span>Warn</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-line" style="background: #d13212;"></div>
                                    <span>Alert</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-line" style="background: #5dade2;"></div>
                                    <span>Deployment</span>
                                </div>
                            </div>
                        </div>

                        <div class="architecture-description">
                            <strong>Architecture:</strong> Customer traffic enters through Route53 DNS, hitting CloudFront CDN for static assets. Requests flow through Application Load Balancers to a fleet of EC2 web servers, which query RDS PostgreSQL read replicas for dynamic content. Ad network integration tracks attribution for paid traffic sources.
                        </div>

                        <div class="architecture-diagram">
                            <svg width="100%" height="120" viewBox="0 0 640 120">
                                <defs>
                                    <marker id="arrowhead" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto">
                                        <polygon points="0 0, 6 3, 0 6" fill="#687078" />
                                    </marker>
                                </defs>

                                <!-- Arrows (render first, behind boxes) -->
                                <line x1="80" y1="60" x2="110" y2="60" stroke="#687078" stroke-width="1.5" marker-end="url(#arrowhead)"/>
                                <line x1="190" y1="60" x2="220" y2="60" stroke="#687078" stroke-width="1.5" marker-end="url(#arrowhead)"/>
                                <line x1="300" y1="60" x2="330" y2="60" stroke="#687078" stroke-width="1.5" marker-end="url(#arrowhead)"/>
                                <line x1="400" y1="60" x2="430" y2="60" stroke="#687078" stroke-width="1.5" marker-end="url(#arrowhead)"/>
                                <line x1="510" y1="53" x2="540" y2="38" stroke="#687078" stroke-width="1.5" marker-end="url(#arrowhead)"/>
                                <line x1="510" y1="67" x2="540" y2="82" stroke="#687078" stroke-width="1.5" marker-end="url(#arrowhead)"/>

                                <!-- Boxes -->
                                <rect x="10" y="45" width="70" height="30" fill="none" stroke="#3f4f5f" stroke-width="2" rx="3"/>
                                <text x="45" y="65" text-anchor="middle" fill="#aab7b8" font-size="10">Browser</text>

                                <rect x="110" y="45" width="80" height="30" fill="none" stroke="#3f4f5f" stroke-width="2" rx="3"/>
                                <text x="150" y="65" text-anchor="middle" fill="#aab7b8" font-size="10">DNS (Route53)</text>

                                <rect x="220" y="45" width="80" height="30" fill="none" stroke="#3f4f5f" stroke-width="2" rx="3"/>
                                <text x="260" y="65" text-anchor="middle" fill="#aab7b8" font-size="10">CDN (CF)</text>

                                <rect x="330" y="45" width="70" height="30" fill="none" stroke="#ec7211" stroke-width="2" rx="3"/>
                                <text x="365" y="65" text-anchor="middle" fill="#ec7211" font-size="10">ALB</text>

                                <rect x="430" y="45" width="80" height="30" fill="none" stroke="#ec7211" stroke-width="2" rx="3"/>
                                <text x="470" y="65" text-anchor="middle" fill="#ec7211" font-size="10">Web Tier (EC2)</text>

                                <rect x="540" y="15" width="90" height="30" fill="none" stroke="#3f4f5f" stroke-width="2" rx="3"/>
                                <text x="585" y="35" text-anchor="middle" fill="#aab7b8" font-size="10">Database (RDS)</text>

                                <rect x="540" y="75" width="90" height="30" fill="none" stroke="#3f4f5f" stroke-width="2" rx="3"/>
                                <text x="585" y="95" text-anchor="middle" fill="#aab7b8" font-size="10">Ad Network (API)</text>
                            </svg>
                        </div>

                        <div class="recent-events-title">Recent Events:</div>
                        <div class="recent-events">10/19, 2:15a - 2:47a - CloudFront cache hit ratio degraded to 72% due to edge location capacity, RCA-201487
10/16, 3:00a - 3:25a - RDS read replica lag increased to 8s during backup window, RCA-201461
10/15, 9:30p - 10:05p - Route53 health checks intermittent in us-east-2b, no customer impact, RCA-201455</div>
                    </div>

                    <div class="dependency-graphs">
                        <div class="graph-card">
                            <div class="graph-title">DNS Resolution Time</div>
                            <div class="metric-description">Route53 DNS query resolution time from authoritative nameservers in us-east-2, P99 latency, alert threshold 22ms</div>
                            <div class="graph-value healthy">12ms P99</div>
                            <svg class="graph-svg" viewBox="0 0 300 100">
                                <line x1="30" y1="20" x2="280" y2="20" class="grid-line"/>
                                <line x1="30" y1="50" x2="280" y2="50" class="grid-line"/>
                                <line x1="30" y1="80" x2="280" y2="80" class="grid-line"/>

                                <text x="25" y="83" text-anchor="end" class="axis-label">8</text>
                                <text x="25" y="53" text-anchor="end" class="axis-label">18</text>
                                <text x="25" y="23" text-anchor="end" class="axis-label">28</text>

                                <line x1="30" y1="38" x2="280" y2="38" class="alert-line"/>
                                <text x="282" y="40" class="threshold-label alert-label">22</text>

                                <line x1="30" y1="50" x2="280" y2="50" class="warn-line"/>
                                <text x="282" y="52" class="threshold-label warn-label">18</text>

                                <polyline fill="none" class="metric-line" stroke-width="2"
                                    points="30,68 60,66 90,70 120,67 150,69 180,66 210,71 240,68 270,70"/>

                                <!-- Deployment markers -->
                                <line x1="134" y1="20" x2="134" y2="80" class="deployment-line"/>
                                <line x1="228" y1="20" x2="228" y2="80" class="deployment-line"/>
                            </svg>
                        </div>

                        <div class="graph-card">
                            <div class="graph-title">Load Balancer Health</div>
                            <div class="metric-description">Rate of HTTP 200 responses vs non-200 status codes on ALB target groups aggregated across us-east-2a/b/c, target >99.6%</div>
                            <div class="graph-value healthy">99.98%</div>
                            <svg class="graph-svg" viewBox="0 0 300 100">
                                <line x1="30" y1="20" x2="280" y2="20" class="grid-line"/>
                                <line x1="30" y1="50" x2="280" y2="50" class="grid-line"/>
                                <line x1="30" y1="80" x2="280" y2="80" class="grid-line"/>

                                <text x="25" y="83" text-anchor="end" class="axis-label">99.0</text>
                                <text x="25" y="53" text-anchor="end" class="axis-label">99.5</text>
                                <text x="25" y="23" text-anchor="end" class="axis-label">100</text>

                                <line x1="30" y1="68" x2="280" y2="68" class="alert-line"/>
                                <text x="282" y="70" class="threshold-label alert-label">99.3</text>

                                <line x1="30" y1="44" x2="280" y2="44" class="warn-line"/>
                                <text x="282" y="46" class="threshold-label warn-label">99.6</text>

                                <!-- Per-AZ lines -->
                                <polyline fill="none" stroke="#3b82f6" stroke-width="1.5" opacity="0.8"
                                    points="30,22 60,21 90,23 120,22 150,24 180,21 210,23 240,22 270,23"/>
                                <polyline fill="none" stroke="#10b981" stroke-width="1.5" opacity="0.8"
                                    points="30,21 60,20 90,22 120,21 150,22 180,20 210,22 240,21 270,22"/>
                                <polyline fill="none" stroke="#f59e0b" stroke-width="1.5" opacity="0.8"
                                    points="30,20 60,19 90,21 120,20 150,21 180,19 210,21 240,20 270,21"/>

                                <!-- Legend -->
                                <line x1="32" y1="90" x2="42" y2="90" stroke="#3b82f6" stroke-width="1.5"/>
                                <text x="45" y="92" class="axis-label" font-size="8">2a</text>
                                <line x1="62" y1="90" x2="72" y2="90" stroke="#10b981" stroke-width="1.5"/>
                                <text x="75" y="92" class="axis-label" font-size="8">2b</text>
                                <line x1="92" y1="90" x2="102" y2="90" stroke="#f59e0b" stroke-width="1.5"/>
                                <text x="105" y="92" class="axis-label" font-size="8">2c</text>

                                <!-- Deployment markers -->
                                <line x1="134" y1="20" x2="134" y2="80" class="deployment-line"/>
                                <line x1="228" y1="20" x2="228" y2="80" class="deployment-line"/>
                            </svg>
                        </div>

                        <div class="graph-card">
                            <div class="graph-title">CDN Cache Hit Rate</div>
                            <div class="metric-description">CloudFront cache hit ratio (hits/[hits+misses]) for CSS/JS/images across 40+ edge locations, target >90%</div>
                            <div class="graph-value healthy">94.2%</div>
                            <svg class="graph-svg" viewBox="0 0 300 100">
                                <line x1="30" y1="20" x2="280" y2="20" class="grid-line"/>
                                <line x1="30" y1="50" x2="280" y2="50" class="grid-line"/>
                                <line x1="30" y1="80" x2="280" y2="80" class="grid-line"/>

                                <text x="25" y="83" text-anchor="end" class="axis-label">80</text>
                                <text x="25" y="53" text-anchor="end" class="axis-label">90</text>
                                <text x="25" y="23" text-anchor="end" class="axis-label">100</text>

                                <line x1="30" y1="65" x2="280" y2="65" class="alert-line"/>
                                <text x="282" y="67" class="threshold-label alert-label">85</text>

                                <line x1="30" y1="47" x2="280" y2="47" class="warn-line"/>
                                <text x="282" y="49" class="threshold-label warn-label">90</text>

                                <polyline fill="none" class="metric-line" stroke-width="2"
                                    points="30,29 60,28 90,31 120,28 150,30 180,28 210,31 240,29 270,30"/>

                                <!-- Deployment markers -->
                                <line x1="134" y1="20" x2="134" y2="80" class="deployment-line"/>
                                <line x1="228" y1="20" x2="228" y2="80" class="deployment-line"/>
                            </svg>
                        </div>

                        <div class="graph-card">
                            <div class="graph-title">Homepage Load Time</div>
                            <div class="metric-description">P99 time-to-interactive from CloudWatch RUM JavaScript beacon, measures DOMContentLoaded + JS execution, target <1.7s</div>
                            <div class="graph-value healthy">1.2s P99</div>
                            <svg class="graph-svg" viewBox="0 0 300 100">
                                <line x1="30" y1="20" x2="280" y2="20" class="grid-line"/>
                                <line x1="30" y1="50" x2="280" y2="50" class="grid-line"/>
                                <line x1="30" y1="80" x2="280" y2="80" class="grid-line"/>

                                <text x="25" y="83" text-anchor="end" class="axis-label">0.8</text>
                                <text x="25" y="53" text-anchor="end" class="axis-label">1.5</text>
                                <text x="25" y="23" text-anchor="end" class="axis-label">2.2</text>

                                <line x1="30" y1="32" x2="280" y2="32" class="alert-line"/>
                                <text x="282" y="34" class="threshold-label alert-label">2.0</text>

                                <line x1="30" y1="43" x2="280" y2="43" class="warn-line"/>
                                <text x="282" y="45" class="threshold-label warn-label">1.7</text>

                                <polyline fill="none" class="metric-line" stroke-width="2"
                                    points="30,63 60,61 90,65 120,62 150,64 180,61 210,66 240,63 270,65"/>

                                <!-- Deployment markers -->
                                <line x1="134" y1="20" x2="134" y2="80" class="deployment-line"/>
                                <line x1="228" y1="20" x2="228" y2="80" class="deployment-line"/>
                            </svg>
                        </div>

                        <div class="graph-card">
                            <div class="graph-title">Web Server CPU</div>
                            <div class="metric-description">CPU utilization % averaged across 48 EC2 c5.2xlarge instances in Auto Scaling Group, scales out at 75% threshold</div>
                            <div class="graph-value healthy">42%</div>
                            <svg class="graph-svg" viewBox="0 0 300 100">
                                <line x1="30" y1="20" x2="280" y2="20" class="grid-line"/>
                                <line x1="30" y1="50" x2="280" y2="50" class="grid-line"/>
                                <line x1="30" y1="80" x2="280" y2="80" class="grid-line"/>

                                <text x="25" y="83" text-anchor="end" class="axis-label">20</text>
                                <text x="25" y="53" text-anchor="end" class="axis-label">60</text>
                                <text x="25" y="23" text-anchor="end" class="axis-label">100</text>

                                <line x1="30" y1="28" x2="280" y2="28" class="alert-line"/>
                                <text x="282" y="30" class="threshold-label alert-label">90</text>

                                <line x1="30" y1="38" x2="280" y2="38" class="warn-line"/>
                                <text x="282" y="40" class="threshold-label warn-label">75</text>

                                <!-- Per-AZ lines -->
                                <polyline fill="none" stroke="#3b82f6" stroke-width="1.5" opacity="0.8"
                                    points="30,66 60,64 90,68 120,65 150,67 180,64 210,69 240,66 270,68"/>
                                <polyline fill="none" stroke="#10b981" stroke-width="1.5" opacity="0.8"
                                    points="30,64 60,62 90,66 120,63 150,65 180,62 210,67 240,64 270,66"/>
                                <polyline fill="none" stroke="#f59e0b" stroke-width="1.5" opacity="0.8"
                                    points="30,62 60,60 90,64 120,61 150,63 180,60 210,65 240,62 270,64"/>

                                <!-- Legend -->
                                <line x1="32" y1="90" x2="42" y2="90" stroke="#3b82f6" stroke-width="1.5"/>
                                <text x="45" y="92" class="axis-label" font-size="8">2a</text>
                                <line x1="62" y1="90" x2="72" y2="90" stroke="#10b981" stroke-width="1.5"/>
                                <text x="75" y="92" class="axis-label" font-size="8">2b</text>
                                <line x1="92" y1="90" x2="102" y2="90" stroke="#f59e0b" stroke-width="1.5"/>
                                <text x="105" y="92" class="axis-label" font-size="8">2c</text>

                                <!-- Deployment markers -->
                                <line x1="134" y1="20" x2="134" y2="80" class="deployment-line"/>
                                <line x1="228" y1="20" x2="228" y2="80" class="deployment-line"/>
                            </svg>
                        </div>

                        <div class="graph-card">
                            <div class="graph-title">Database Connections</div>
                            <div class="metric-description">Active PostgreSQL connections to 3 RDS read replicas (max_connections=500 per instance), PgBouncer connection pooling enabled</div>
                            <div class="graph-value healthy">167</div>
                            <svg class="graph-svg" viewBox="0 0 300 100">
                                <line x1="30" y1="20" x2="280" y2="20" class="grid-line"/>
                                <line x1="30" y1="50" x2="280" y2="50" class="grid-line"/>
                                <line x1="30" y1="80" x2="280" y2="80" class="grid-line"/>

                                <text x="25" y="83" text-anchor="end" class="axis-label">100</text>
                                <text x="25" y="53" text-anchor="end" class="axis-label">225</text>
                                <text x="25" y="23" text-anchor="end" class="axis-label">350</text>

                                <line x1="30" y1="30" x2="280" y2="30" class="alert-line"/>
                                <text x="282" y="32" class="threshold-label alert-label">320</text>

                                <line x1="30" y1="40" x2="280" y2="40" class="warn-line"/>
                                <text x="282" y="42" class="threshold-label warn-label">280</text>

                                <polyline fill="none" class="metric-line" stroke-width="2"
                                    points="30,62 60,60 90,64 120,61 150,63 180,60 210,65 240,62 270,64"/>

                                <!-- Deployment markers -->
                                <line x1="134" y1="20" x2="134" y2="80" class="deployment-line"/>
                                <line x1="228" y1="20" x2="228" y2="80" class="deployment-line"/>
                            </svg>
                        </div>

                        <div class="graph-card">
                            <div class="graph-title">Ad Network Response</div>
                            <div class="metric-description">P99 API response time from Google Ads/Facebook Pixel attribution endpoints, timeout configured at 2000ms</div>
                            <div class="graph-value healthy">187ms P99</div>
                            <svg class="graph-svg" viewBox="0 0 300 100">
                                <line x1="30" y1="20" x2="280" y2="20" class="grid-line"/>
                                <line x1="30" y1="50" x2="280" y2="50" class="grid-line"/>
                                <line x1="30" y1="80" x2="280" y2="80" class="grid-line"/>

                                <text x="25" y="83" text-anchor="end" class="axis-label">120</text>
                                <text x="25" y="53" text-anchor="end" class="axis-label">220</text>
                                <text x="25" y="23" text-anchor="end" class="axis-label">320</text>

                                <line x1="30" y1="32" x2="280" y2="32" class="alert-line"/>
                                <text x="282" y="34" class="threshold-label alert-label">280</text>

                                <line x1="30" y1="43" x2="280" y2="43" class="warn-line"/>
                                <text x="282" y="45" class="threshold-label warn-label">230</text>

                                <polyline fill="none" class="metric-line" stroke-width="2"
                                    points="30,56 60,54 90,58 120,55 150,57 180,54 210,59 240,56 270,58"/>

                                <!-- Deployment markers -->
                                <line x1="134" y1="20" x2="134" y2="80" class="deployment-line"/>
                                <line x1="228" y1="20" x2="228" y2="80" class="deployment-line"/>
                            </svg>
                        </div>

                        <div class="graph-card">
                            <div class="graph-title">SSL Handshake Time</div>
                            <div class="metric-description">P99 TLS 1.3 handshake duration at ALB using ACM-managed certificates, includes session resumption optimization</div>
                            <div class="graph-value healthy">34ms P99</div>
                            <svg class="graph-svg" viewBox="0 0 300 100">
                                <line x1="30" y1="20" x2="280" y2="20" class="grid-line"/>
                                <line x1="30" y1="50" x2="280" y2="50" class="grid-line"/>
                                <line x1="30" y1="80" x2="280" y2="80" class="grid-line"/>

                                <text x="25" y="83" text-anchor="end" class="axis-label">20</text>
                                <text x="25" y="53" text-anchor="end" class="axis-label">50</text>
                                <text x="25" y="23" text-anchor="end" class="axis-label">80</text>

                                <line x1="30" y1="33" x2="280" y2="33" class="alert-line"/>
                                <text x="282" y="35" class="threshold-label alert-label">70</text>

                                <line x1="30" y1="43" x2="280" y2="43" class="warn-line"/>
                                <text x="282" y="45" class="threshold-label warn-label">55</text>

                                <polyline fill="none" class="metric-line" stroke-width="2"
                                    points="30,67 60,65 90,69 120,66 150,68 180,65 210,70 240,67 270,69"/>

                                <!-- Deployment markers -->
                                <line x1="134" y1="20" x2="134" y2="80" class="deployment-line"/>
                                <line x1="228" y1="20" x2="228" y2="80" class="deployment-line"/>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 2: Browse and Find Equipment -->
        <div class="journey-step">
            <div class="step-narrative">
                <div class="step-number">
                    <span class="step-badge">STEP 2</span>
                    <div class="traffic-light">
                        <div class="traffic-light-circle red"></div>
                        <div class="traffic-light-circle yellow"></div>
                        <div class="traffic-light-circle green active"></div>
                    </div>
                </div>
                <div class="step-title">Browse and Find Equipment</div>
                <div class="step-description">
                    Customers navigate through product categories, use search functionality, and view product detail pages to find the camping equipment they need.
                </div>
            </div>

            <div class="step-content">
                <div class="graphs-container">
                    <div class="hero-graph">
                        <div class="graph-card">
                            <div class="graph-title">Product Page Views</div>
                            <div class="graph-value healthy">2,847 /min</div>
                            <svg class="graph-svg" viewBox="0 0 600 280">
                                <line x1="50" y1="30" x2="580" y2="30" class="grid-line"/>
                                <line x1="50" y1="80" x2="580" y2="80" class="grid-line"/>
                                <line x1="50" y1="130" x2="580" y2="130" class="grid-line"/>
                                <line x1="50" y1="180" x2="580" y2="180" class="grid-line"/>
                                <line x1="50" y1="230" x2="580" y2="230" class="grid-line"/>

                                <text x="45" y="235" text-anchor="end" class="axis-label">2000</text>
                                <text x="45" y="185" text-anchor="end" class="axis-label">2400</text>
                                <text x="45" y="135" text-anchor="end" class="axis-label">2800</text>
                                <text x="45" y="85" text-anchor="end" class="axis-label">3200</text>
                                <text x="45" y="35" text-anchor="end" class="axis-label">3600</text>

                                <line x1="50" y1="217" x2="580" y2="217" class="alert-line" stroke-width="2"/>
                                <text x="582" y="220" class="threshold-label alert-label">2200</text>

                                <line x1="50" y1="192" x2="580" y2="192" class="warn-line" stroke-width="2"/>
                                <text x="582" y="195" class="threshold-label warn-label">2500</text>

                                <polyline fill="none" class="metric-line" stroke-width="2"
                                    points="50,138 80,132 110,136 140,130 170,135 200,132 230,138 260,134 290,131 320,137 350,133 380,138 410,133 440,136 470,132 500,137 530,135 560,138 580,136"/>

                                <!-- Deployment markers -->
                                <line x1="271" y1="30" x2="271" y2="250" class="deployment-line"/>
                                <line x1="470" y1="30" x2="470" y2="250" class="deployment-line"/>

                                <text x="80" y="260" text-anchor="middle" class="axis-label">00:00</text>
                                <text x="200" y="260" text-anchor="middle" class="axis-label">02:00</text>
                                <text x="320" y="260" text-anchor="middle" class="axis-label">04:00</text>
                                <text x="440" y="260" text-anchor="middle" class="axis-label">06:00</text>
                                <text x="560" y="260" text-anchor="middle" class="axis-label">now</text>
                            </svg>
                            <div class="legend">
                                <div class="legend-item">
                                    <div class="legend-line" style="background: #1d8102;"></div>
                                    <span>Current</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-line" style="background: #ff9900;"></div>
                                    <span>Warn</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-line" style="background: #d13212;"></div>
                                    <span>Alert</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-line" style="background: #5dade2;"></div>
                                    <span>Deployment</span>
                                </div>
                            </div>
                        </div>

                        <div class="architecture-description">
                            <strong>Architecture:</strong> Product browsing adds Elasticsearch clusters for search, S3-backed image service with CloudFront distribution, and a recommendation engine (SageMaker endpoint). Product catalog heavily cached in Redis to minimize database load. Review service provides ratings and customer feedback.
                        </div>

                        <div class="architecture-diagram">
                            <svg width="100%" height="140" viewBox="0 0 650 140">
                                <defs>
                                    <marker id="arrowhead2" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto">
                                        <polygon points="0 0, 6 3, 0 6" fill="#687078" />
                                    </marker>
                                </defs>

                                <!-- Arrows (render first, behind boxes) -->
                                <line x1="100" y1="63" x2="130" y2="27" stroke="#687078" stroke-width="1.5" marker-end="url(#arrowhead2)"/>
                                <line x1="100" y1="70" x2="130" y2="70" stroke="#687078" stroke-width="1.5" marker-end="url(#arrowhead2)"/>
                                <line x1="100" y1="77" x2="130" y2="113" stroke="#687078" stroke-width="1.5" marker-end="url(#arrowhead2)"/>
                                <line x1="110" y1="70" x2="260" y2="25" stroke="#687078" stroke-width="1.5" marker-end="url(#arrowhead2)"/>
                                <line x1="110" y1="70" x2="260" y2="70" stroke="#687078" stroke-width="1.5" marker-end="url(#arrowhead2)"/>
                                <line x1="110" y1="70" x2="260" y2="115" stroke="#687078" stroke-width="1.5" marker-end="url(#arrowhead2)"/>
                                <line x1="370" y1="25" x2="400" y2="25" stroke="#687078" stroke-width="1.5" marker-end="url(#arrowhead2)"/>

                                <!-- Boxes -->
                                <rect x="10" y="55" width="90" height="30" fill="none" stroke="#3f4f5f" stroke-width="2" rx="3"/>
                                <text x="55" y="75" text-anchor="middle" fill="#aab7b8" font-size="10">Web Tier (EC2)</text>

                                <rect x="130" y="10" width="100" height="30" fill="none" stroke="#ec7211" stroke-width="2" rx="3"/>
                                <text x="180" y="30" text-anchor="middle" fill="#ec7211" font-size="10">Search (ES)</text>

                                <rect x="130" y="55" width="100" height="30" fill="none" stroke="#3f4f5f" stroke-width="2" rx="3"/>
                                <text x="180" y="75" text-anchor="middle" fill="#aab7b8" font-size="10">Product DB (RDS)</text>

                                <rect x="130" y="100" width="100" height="30" fill="none" stroke="#3f4f5f" stroke-width="2" rx="3"/>
                                <text x="180" y="120" text-anchor="middle" fill="#aab7b8" font-size="10">Cache (ElastiCache)</text>

                                <rect x="260" y="10" width="110" height="30" fill="none" stroke="#3f4f5f" stroke-width="2" rx="3"/>
                                <text x="315" y="30" text-anchor="middle" fill="#aab7b8" font-size="10">Image Svc (S3)</text>

                                <rect x="260" y="55" width="110" height="30" fill="none" stroke="#3f4f5f" stroke-width="2" rx="3"/>
                                <text x="315" y="75" text-anchor="middle" fill="#aab7b8" font-size="10">Review Svc (DynamoDB)</text>

                                <rect x="260" y="100" width="110" height="30" fill="none" stroke="#3f4f5f" stroke-width="2" rx="3"/>
                                <text x="315" y="120" text-anchor="middle" fill="#aab7b8" font-size="10">Recommend (SageMaker)</text>

                                <rect x="400" y="10" width="90" height="30" fill="none" stroke="#3f4f5f" stroke-width="2" rx="3"/>
                                <text x="445" y="30" text-anchor="middle" fill="#aab7b8" font-size="10">CDN (CloudFront)</text>
                            </svg>
                        </div>

                        <div class="recent-events-title">Recent Events:</div>
                        <div class="recent-events">10/22, 4:20p - 4:55p - Elasticsearch cluster us-east-2c experienced elevated search latency (500ms+ P99), RCA-201501
10/18, 11:45a - 12:30p - Redis eviction rate spike due to memory pressure, added 2 cache nodes, RCA-201472
10/17, 8:00p - 8:15p - Deployment d-2024101700 caused brief increased latency across product and cart services, RCA-201470
10/16, 3:00a - 3:25a - RDS read replica lag increased to 8s during backup window, RCA-201461</div>
                    </div>

                    <div class="dependency-graphs">
                        <div class="graph-card">
                            <div class="graph-title">CDN Response Time</div>
                            <div class="metric-description">P99 CloudFront response time for S3-backed product images (JPEG/WebP) across edge locations, origin shield enabled</div>
                            <div class="graph-value healthy">18ms P99</div>
                            <svg class="graph-svg" viewBox="0 0 300 100">
                                <line x1="30" y1="20" x2="280" y2="20" class="grid-line"/>
                                <line x1="30" y1="50" x2="280" y2="50" class="grid-line"/>
                                <line x1="30" y1="80" x2="280" y2="80" class="grid-line"/>

                                <text x="25" y="83" text-anchor="end" class="axis-label">10</text>
                                <text x="25" y="53" text-anchor="end" class="axis-label">25</text>
                                <text x="25" y="23" text-anchor="end" class="axis-label">40</text>

                                <line x1="30" y1="30" x2="280" y2="30" class="alert-line"/>
                                <text x="282" y="32" class="threshold-label alert-label">35</text>

                                <line x1="30" y1="50" x2="280" y2="50" class="warn-line"/>
                                <text x="282" y="52" class="threshold-label warn-label">25</text>

                                <polyline fill="none" class="metric-line" stroke-width="2"
                                    points="30,68 60,66 90,70 120,67 150,69 180,66 210,71 240,68 270,70"/>

                                <!-- Deployment markers -->
                                <line x1="134" y1="20" x2="134" y2="80" class="deployment-line"/>
                                <line x1="228" y1="20" x2="228" y2="80" class="deployment-line"/>
                            </svg>
                        </div>

                        <div class="graph-card">
                            <div class="graph-title">Search API Latency</div>
                            <div class="metric-description">P99 Elasticsearch search query latency across 6-node r5.xlarge cluster (18 shards, 2 replicas), includes faceting and highlighting</div>
                            <div class="graph-value healthy">42ms P99</div>
                            <svg class="graph-svg" viewBox="0 0 300 100">
                                <line x1="30" y1="20" x2="280" y2="20" class="grid-line"/>
                                <line x1="30" y1="50" x2="280" y2="50" class="grid-line"/>
                                <line x1="30" y1="80" x2="280" y2="80" class="grid-line"/>

                                <text x="25" y="83" text-anchor="end" class="axis-label">20</text>
                                <text x="25" y="53" text-anchor="end" class="axis-label">60</text>
                                <text x="25" y="23" text-anchor="end" class="axis-label">100</text>

                                <line x1="30" y1="36" x2="280" y2="36" class="alert-line"/>
                                <text x="282" y="38" class="threshold-label alert-label">80</text>

                                <line x1="30" y1="50" x2="280" y2="50" class="warn-line"/>
                                <text x="282" y="52" class="threshold-label warn-label">60</text>

                                <!-- Per-AZ lines -->
                                <polyline fill="none" stroke="#3b82f6" stroke-width="1.5" opacity="0.8"
                                    points="30,69 60,67 90,70 120,66 150,69 180,68 210,71 240,67 270,70"/>
                                <polyline fill="none" stroke="#10b981" stroke-width="1.5" opacity="0.8"
                                    points="30,67 60,65 90,68 120,64 150,67 180,66 210,69 240,65 270,68"/>
                                <polyline fill="none" stroke="#f59e0b" stroke-width="1.5" opacity="0.8"
                                    points="30,65 60,63 90,66 120,62 150,65 180,64 210,67 240,63 270,66"/>

                                <!-- Legend -->
                                <line x1="32" y1="90" x2="42" y2="90" stroke="#3b82f6" stroke-width="1.5"/>
                                <text x="45" y="92" class="axis-label" font-size="8">2a</text>
                                <line x1="62" y1="90" x2="72" y2="90" stroke="#10b981" stroke-width="1.5"/>
                                <text x="75" y="92" class="axis-label" font-size="8">2b</text>
                                <line x1="92" y1="90" x2="102" y2="90" stroke="#f59e0b" stroke-width="1.5"/>
                                <text x="105" y="92" class="axis-label" font-size="8">2c</text>

                                <!-- Deployment markers -->
                                <line x1="134" y1="20" x2="134" y2="80" class="deployment-line"/>
                                <line x1="228" y1="20" x2="228" y2="80" class="deployment-line"/>
                            </svg>
                        </div>

                        <div class="graph-card">
                            <div class="graph-title">Database Query Time</div>
                            <div class="metric-description">P99 PostgreSQL SELECT query time on product_catalog table (22M rows) against read replicas, PgBouncer connection pooling</div>
                            <div class="graph-value healthy">23ms P99</div>
                            <svg class="graph-svg" viewBox="0 0 300 100">
                                <line x1="30" y1="20" x2="280" y2="20" class="grid-line"/>
                                <line x1="30" y1="50" x2="280" y2="50" class="grid-line"/>
                                <line x1="30" y1="80" x2="280" y2="80" class="grid-line"/>

                                <text x="25" y="83" text-anchor="end" class="axis-label">15</text>
                                <text x="25" y="53" text-anchor="end" class="axis-label">30</text>
                                <text x="25" y="23" text-anchor="end" class="axis-label">45</text>

                                <line x1="30" y1="30" x2="280" y2="30" class="alert-line"/>
                                <text x="282" y="32" class="threshold-label alert-label">40</text>

                                <line x1="30" y1="50" x2="280" y2="50" class="warn-line"/>
                                <text x="282" y="52" class="threshold-label warn-label">30</text>

                                <polyline fill="none" class="metric-line" stroke-width="2"
                                    points="30,67 60,65 90,69 120,66 150,68 180,64 210,67 240,66 270,68"/>

                                <!-- Deployment markers -->
                                <line x1="134" y1="20" x2="134" y2="80" class="deployment-line"/>
                                <line x1="228" y1="20" x2="228" y2="80" class="deployment-line"/>
                            </svg>
                        </div>

                        <div class="graph-card">
                            <div class="graph-title">Image Service Avail</div>
                            <div class="metric-description">S3 GET request success rate for product-images bucket (Standard-IA storage class), versioning enabled, target 99.99%</div>
                            <div class="graph-value healthy">99.97%</div>
                            <svg class="graph-svg" viewBox="0 0 300 100">
                                <line x1="30" y1="20" x2="280" y2="20" class="grid-line"/>
                                <line x1="30" y1="50" x2="280" y2="50" class="grid-line"/>
                                <line x1="30" y1="80" x2="280" y2="80" class="grid-line"/>

                                <text x="25" y="83" text-anchor="end" class="axis-label">99.0</text>
                                <text x="25" y="53" text-anchor="end" class="axis-label">99.5</text>
                                <text x="25" y="23" text-anchor="end" class="axis-label">100</text>

                                <line x1="30" y1="68" x2="280" y2="68" class="alert-line"/>
                                <text x="282" y="70" class="threshold-label alert-label">99.3</text>

                                <line x1="30" y1="44" x2="280" y2="44" class="warn-line"/>
                                <text x="282" y="46" class="threshold-label warn-label">99.6</text>

                                <polyline fill="none" class="metric-line" stroke-width="2"
                                    points="30,24 60,23 90,25 120,23 150,24 180,23 210,25 240,24 270,23"/>

                                <!-- Deployment markers -->
                                <line x1="134" y1="20" x2="134" y2="80" class="deployment-line"/>
                                <line x1="228" y1="20" x2="228" y2="80" class="deployment-line"/>
                            </svg>
                        </div>

                        <div class="graph-card">
                            <div class="graph-title">Product DB Read Ops</div>
                            <div class="metric-description">RDS db.r5.2xlarge read IOPS consumed per second, provisioned IOPS = 5000, includes index scans on product_catalog</div>
                            <div class="graph-value healthy">2,847 /sec</div>
                            <svg class="graph-svg" viewBox="0 0 300 100">
                                <line x1="30" y1="20" x2="280" y2="20" class="grid-line"/>
                                <line x1="30" y1="50" x2="280" y2="50" class="grid-line"/>
                                <line x1="30" y1="80" x2="280" y2="80" class="grid-line"/>

                                <text x="25" y="83" text-anchor="end" class="axis-label">2000</text>
                                <text x="25" y="53" text-anchor="end" class="axis-label">3200</text>
                                <text x="25" y="23" text-anchor="end" class="axis-label">4400</text>

                                <line x1="30" y1="32" x2="280" y2="32" class="alert-line"/>
                                <text x="282" y="34" class="threshold-label alert-label">4000</text>

                                <line x1="30" y1="44" x2="280" y2="44" class="warn-line"/>
                                <text x="282" y="46" class="threshold-label warn-label">3500</text>

                                <polyline fill="none" class="metric-line" stroke-width="2"
                                    points="30,61 60,59 90,63 120,60 150,62 180,59 210,64 240,61 270,63"/>

                                <!-- Deployment markers -->
                                <line x1="134" y1="20" x2="134" y2="80" class="deployment-line"/>
                                <line x1="228" y1="20" x2="228" y2="80" class="deployment-line"/>
                            </svg>
                        </div>

                        <div class="graph-card">
                            <div class="graph-title">Cache Hit Ratio</div>
                            <div class="metric-description">ElastiCache Redis 6.2 cache hit rate (hits/[hits+misses]) on 3-node r6g.large cluster, TTL=3600s, target >95%</div>
                            <div class="graph-value healthy">87.3%</div>
                            <svg class="graph-svg" viewBox="0 0 300 100">
                                <line x1="30" y1="20" x2="280" y2="20" class="grid-line"/>
                                <line x1="30" y1="50" x2="280" y2="50" class="grid-line"/>
                                <line x1="30" y1="80" x2="280" y2="80" class="grid-line"/>

                                <text x="25" y="83" text-anchor="end" class="axis-label">70</text>
                                <text x="25" y="53" text-anchor="end" class="axis-label">85</text>
                                <text x="25" y="23" text-anchor="end" class="axis-label">100</text>

                                <line x1="30" y1="68" x2="280" y2="68" class="alert-line"/>
                                <text x="282" y="70" class="threshold-label alert-label">75</text>

                                <line x1="30" y1="56" x2="280" y2="56" class="warn-line"/>
                                <text x="282" y="58" class="threshold-label warn-label">80</text>

                                <polyline fill="none" class="metric-line" stroke-width="2"
                                    points="30,42 60,40 90,44 120,41 150,43 180,40 210,45 240,42 270,44"/>

                                <!-- Deployment markers -->
                                <line x1="134" y1="20" x2="134" y2="80" class="deployment-line"/>
                                <line x1="228" y1="20" x2="228" y2="80" class="deployment-line"/>
                            </svg>
                        </div>

                        <div class="graph-card">
                            <div class="graph-title">Review Service API</div>
                            <div class="metric-description">P99 API response time for review service (ECS Fargate) querying DynamoDB reviews table (on-demand capacity), includes pagination</div>
                            <div class="graph-value healthy">52ms P99</div>
                            <svg class="graph-svg" viewBox="0 0 300 100">
                                <line x1="30" y1="20" x2="280" y2="20" class="grid-line"/>
                                <line x1="30" y1="50" x2="280" y2="50" class="grid-line"/>
                                <line x1="30" y1="80" x2="280" y2="80" class="grid-line"/>

                                <text x="25" y="83" text-anchor="end" class="axis-label">30</text>
                                <text x="25" y="53" text-anchor="end" class="axis-label">80</text>
                                <text x="25" y="23" text-anchor="end" class="axis-label">130</text>

                                <line x1="30" y1="34" x2="280" y2="34" class="alert-line"/>
                                <text x="282" y="36" class="threshold-label alert-label">110</text>

                                <line x1="30" y1="44" x2="280" y2="44" class="warn-line"/>
                                <text x="282" y="46" class="threshold-label warn-label">90</text>

                                <polyline fill="none" class="metric-line" stroke-width="2"
                                    points="30,64 60,62 90,66 120,63 150,65 180,62 210,67 240,64 270,66"/>

                                <!-- Deployment markers -->
                                <line x1="134" y1="20" x2="134" y2="80" class="deployment-line"/>
                                <line x1="228" y1="20" x2="228" y2="80" class="deployment-line"/>
                            </svg>
                        </div>

                        <div class="graph-card">
                            <div class="graph-title">Recommendation Engine</div>
                            <div class="metric-description">P99 SageMaker real-time inference latency for collaborative-filtering recommendation model (ml.m5.xlarge endpoint), batch size=1</div>
                            <div class="graph-value healthy">127ms P99</div>
                            <svg class="graph-svg" viewBox="0 0 300 100">
                                <line x1="30" y1="20" x2="280" y2="20" class="grid-line"/>
                                <line x1="30" y1="50" x2="280" y2="50" class="grid-line"/>
                                <line x1="30" y1="80" x2="280" y2="80" class="grid-line"/>

                                <text x="25" y="83" text-anchor="end" class="axis-label">80</text>
                                <text x="25" y="53" text-anchor="end" class="axis-label">150</text>
                                <text x="25" y="23" text-anchor="end" class="axis-label">220</text>

                                <line x1="30" y1="32" x2="280" y2="32" class="alert-line"/>
                                <text x="282" y="34" class="threshold-label alert-label">200</text>

                                <line x1="30" y1="43" x2="280" y2="43" class="warn-line"/>
                                <text x="282" y="45" class="threshold-label warn-label">170</text>

                                <polyline fill="none" class="metric-line" stroke-width="2"
                                    points="30,61 60,59 90,63 120,60 150,62 180,59 210,64 240,61 270,63"/>

                                <!-- Deployment markers -->
                                <line x1="134" y1="20" x2="134" y2="80" class="deployment-line"/>
                                <line x1="228" y1="20" x2="228" y2="80" class="deployment-line"/>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 3: Add to Cart -->
        <div class="journey-step">
            <div class="step-narrative">
                <div class="step-number">
                    <span class="step-badge">STEP 3</span>
                    <div class="traffic-light">
                        <div class="traffic-light-circle red"></div>
                        <div class="traffic-light-circle yellow"></div>
                        <div class="traffic-light-circle green active"></div>
                    </div>
                </div>
                <div class="step-title">Add Equipment to Cart</div>
                <div class="step-description">
                    Customers select product options (size, color, quantity) and add items to their shopping cart. The cart service validates inventory and maintains session state.
                </div>
            </div>

            <div class="step-content">
                <div class="graphs-container">
                    <div class="hero-graph">
                        <div class="graph-card">
                            <div class="graph-title">Add to Cart Events</div>
                            <div class="graph-value healthy">487 /min</div>
                            <svg class="graph-svg" viewBox="0 0 600 280">
                                <line x1="50" y1="30" x2="580" y2="30" class="grid-line"/>
                                <line x1="50" y1="80" x2="580" y2="80" class="grid-line"/>
                                <line x1="50" y1="130" x2="580" y2="130" class="grid-line"/>
                                <line x1="50" y1="180" x2="580" y2="180" class="grid-line"/>
                                <line x1="50" y1="230" x2="580" y2="230" class="grid-line"/>

                                <text x="45" y="235" text-anchor="end" class="axis-label">350</text>
                                <text x="45" y="185" text-anchor="end" class="axis-label">425</text>
                                <text x="45" y="135" text-anchor="end" class="axis-label">500</text>
                                <text x="45" y="85" text-anchor="end" class="axis-label">575</text>
                                <text x="45" y="35" text-anchor="end" class="axis-label">650</text>

                                <line x1="50" y1="213" x2="580" y2="213" class="alert-line" stroke-width="2"/>
                                <text x="582" y="216" class="threshold-label alert-label">380</text>

                                <line x1="50" y1="185" x2="580" y2="185" class="warn-line" stroke-width="2"/>
                                <text x="582" y="188" class="threshold-label warn-label">420</text>

                                <polyline fill="none" class="metric-line" stroke-width="2"
                                    points="50,131 80,128 110,133 140,129 170,132 200,128 230,134 260,130 290,127 320,132 350,129 380,133 410,129 440,131 470,128 500,132 530,130 560,133 580,131"/>

                                <!-- Deployment markers -->
                                <line x1="271" y1="30" x2="271" y2="250" class="deployment-line"/>
                                <line x1="470" y1="30" x2="470" y2="250" class="deployment-line"/>

                                <text x="80" y="260" text-anchor="middle" class="axis-label">00:00</text>
                                <text x="200" y="260" text-anchor="middle" class="axis-label">02:00</text>
                                <text x="320" y="260" text-anchor="middle" class="axis-label">04:00</text>
                                <text x="440" y="260" text-anchor="middle" class="axis-label">06:00</text>
                                <text x="560" y="260" text-anchor="middle" class="axis-label">now</text>
                            </svg>
                            <div class="legend">
                                <div class="legend-item">
                                    <div class="legend-line" style="background: #1d8102;"></div>
                                    <span>Current</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-line" style="background: #ff9900;"></div>
                                    <span>Warn</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-line" style="background: #d13212;"></div>
                                    <span>Alert</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-line" style="background: #5dade2;"></div>
                                    <span>Deployment</span>
                                </div>
                            </div>
                        </div>

                        <div class="architecture-description">
                            <strong>Architecture:</strong> Cart service uses Redis/ElastiCache for session storage (sub-10ms latency) with RDS for cart persistence. Each cart operation validates against the inventory service (separate microservice with its own database), calls the pricing service for real-time price calculations including promotions, and authenticates via the auth service before modifying cart state.
                        </div>

                        <div class="architecture-diagram">
                            <svg width="100%" height="130" viewBox="0 0 620 130">
                                <defs>
                                    <marker id="arrowhead3" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto">
                                        <polygon points="0 0, 6 3, 0 6" fill="#687078" />
                                    </marker>
                                </defs>

                                <!-- Arrows (render first, behind boxes) -->
                                <line x1="100" y1="65" x2="130" y2="65" stroke="#687078" stroke-width="1.5" marker-end="url(#arrowhead3)"/>
                                <line x1="220" y1="58" x2="250" y2="28" stroke="#687078" stroke-width="1.5" marker-end="url(#arrowhead3)"/>
                                <line x1="220" y1="65" x2="250" y2="65" stroke="#687078" stroke-width="1.5" marker-end="url(#arrowhead3)"/>
                                <line x1="220" y1="72" x2="250" y2="102" stroke="#687078" stroke-width="1.5" marker-end="url(#arrowhead3)"/>
                                <line x1="235" y1="65" x2="390" y2="25" stroke="#687078" stroke-width="1.5" marker-end="url(#arrowhead3)"/>
                                <line x1="235" y1="65" x2="390" y2="65" stroke="#687078" stroke-width="1.5" marker-end="url(#arrowhead3)"/>
                                <line x1="500" y1="25" x2="530" y2="25" stroke="#687078" stroke-width="1.5" marker-end="url(#arrowhead3)"/>
                                <line x1="500" y1="65" x2="530" y2="65" stroke="#687078" stroke-width="1.5" marker-end="url(#arrowhead3)"/>

                                <!-- Boxes -->
                                <rect x="10" y="50" width="90" height="30" fill="none" stroke="#3f4f5f" stroke-width="2" rx="3"/>
                                <text x="55" y="70" text-anchor="middle" fill="#aab7b8" font-size="10">Web Tier (EC2)</text>

                                <rect x="130" y="50" width="90" height="30" fill="none" stroke="#ec7211" stroke-width="2" rx="3"/>
                                <text x="175" y="70" text-anchor="middle" fill="#ec7211" font-size="10">Cart Svc (ECS)</text>

                                <rect x="250" y="10" width="110" height="30" fill="none" stroke="#3f4f5f" stroke-width="2" rx="3"/>
                                <text x="305" y="30" text-anchor="middle" fill="#aab7b8" font-size="10">Session (ElastiCache)</text>

                                <rect x="250" y="50" width="110" height="30" fill="none" stroke="#3f4f5f" stroke-width="2" rx="3"/>
                                <text x="305" y="70" text-anchor="middle" fill="#aab7b8" font-size="10">Cart DB (RDS)</text>

                                <rect x="250" y="90" width="110" height="30" fill="none" stroke="#3f4f5f" stroke-width="2" rx="3"/>
                                <text x="305" y="110" text-anchor="middle" fill="#aab7b8" font-size="10">Auth Svc (Lambda)</text>

                                <rect x="390" y="10" width="110" height="30" fill="none" stroke="#3f4f5f" stroke-width="2" rx="3"/>
                                <text x="445" y="30" text-anchor="middle" fill="#aab7b8" font-size="10">Inventory Svc (ECS)</text>

                                <rect x="390" y="50" width="110" height="30" fill="none" stroke="#3f4f5f" stroke-width="2" rx="3"/>
                                <text x="445" y="70" text-anchor="middle" fill="#aab7b8" font-size="10">Pricing Svc (Lambda)</text>

                                <rect x="530" y="10" width="90" height="30" fill="none" stroke="#3f4f5f" stroke-width="2" rx="3"/>
                                <text x="575" y="30" text-anchor="middle" fill="#aab7b8" font-size="10">Inv DB (RDS)</text>

                                <rect x="530" y="50" width="90" height="30" fill="none" stroke="#3f4f5f" stroke-width="2" rx="3"/>
                                <text x="575" y="70" text-anchor="middle" fill="#aab7b8" font-size="10">Price (ElastiCache)</text>
                            </svg>
                        </div>

                        <div class="recent-events-title">Recent Events:</div>
                        <div class="recent-events">10/20, 6:10p - 6:35p - Cart service connection pool exhausted during flash sale, increased pool size, RCA-201489
10/17, 8:00p - 8:15p - Deployment d-2024101700 caused brief increased latency across product and cart services, RCA-201470
10/17, 1:20a - 1:55a - Auth service Lambda cold starts elevated (800ms+) after deployment, RCA-201468
10/16, 3:00a - 3:25a - RDS read replica lag increased to 8s during backup window, RCA-201461</div>
                    </div>

                    <div class="dependency-graphs">
                        <div class="graph-card">
                            <div class="graph-title">Cart API Latency</div>
                            <div class="metric-description">P99 REST API latency for cart operations (POST/PUT/DELETE) on ECS Fargate tasks, includes Redis and RDS round trips</div>
                            <div class="graph-value healthy">67ms P99</div>
                            <svg class="graph-svg" viewBox="0 0 300 100">
                                <line x1="30" y1="20" x2="280" y2="20" class="grid-line"/>
                                <line x1="30" y1="50" x2="280" y2="50" class="grid-line"/>
                                <line x1="30" y1="80" x2="280" y2="80" class="grid-line"/>

                                <text x="25" y="83" text-anchor="end" class="axis-label">40</text>
                                <text x="25" y="53" text-anchor="end" class="axis-label">80</text>
                                <text x="25" y="23" text-anchor="end" class="axis-label">120</text>

                                <line x1="30" y1="35" x2="280" y2="35" class="alert-line"/>
                                <text x="282" y="37" class="threshold-label alert-label">100</text>

                                <line x1="30" y1="50" x2="280" y2="50" class="warn-line"/>
                                <text x="282" y="52" class="threshold-label warn-label">80</text>

                                <polyline fill="none" class="metric-line" stroke-width="2"
                                    points="30,64 60,62 90,66 120,63 150,65 180,62 210,67 240,64 270,66"/>

                                <!-- Deployment markers -->
                                <line x1="134" y1="20" x2="134" y2="80" class="deployment-line"/>
                                <line x1="228" y1="20" x2="228" y2="80" class="deployment-line"/>
                            </svg>
                        </div>

                        <div class="graph-card">
                            <div class="graph-title">Session Store Latency</div>
                            <div class="metric-description">P99 ElastiCache Redis GET/SET command latency on 3-node r6g.xlarge cluster with cluster mode enabled, cross-AZ replication</div>
                            <div class="graph-value healthy">8ms P99</div>
                            <svg class="graph-svg" viewBox="0 0 300 100">
                                <line x1="30" y1="20" x2="280" y2="20" class="grid-line"/>
                                <line x1="30" y1="50" x2="280" y2="50" class="grid-line"/>
                                <line x1="30" y1="80" x2="280" y2="80" class="grid-line"/>

                                <text x="25" y="83" text-anchor="end" class="axis-label">5</text>
                                <text x="25" y="53" text-anchor="end" class="axis-label">12</text>
                                <text x="25" y="23" text-anchor="end" class="axis-label">20</text>

                                <line x1="30" y1="39" x2="280" y2="39" class="alert-line"/>
                                <text x="282" y="41" class="threshold-label alert-label">15</text>

                                <line x1="30" y1="50" x2="280" y2="50" class="warn-line"/>
                                <text x="282" y="52" class="threshold-label warn-label">12</text>

                                <!-- Per-AZ lines -->
                                <polyline fill="none" stroke="#3b82f6" stroke-width="1.5" opacity="0.8"
                                    points="30,74 60,72 90,75 120,73 150,74 180,72 210,76 240,73 270,75"/>
                                <polyline fill="none" stroke="#10b981" stroke-width="1.5" opacity="0.8"
                                    points="30,72 60,70 90,73 120,71 150,72 180,70 210,74 240,71 270,73"/>
                                <polyline fill="none" stroke="#f59e0b" stroke-width="1.5" opacity="0.8"
                                    points="30,70 60,68 90,71 120,69 150,70 180,68 210,72 240,69 270,71"/>

                                <!-- Legend -->
                                <line x1="32" y1="90" x2="42" y2="90" stroke="#3b82f6" stroke-width="1.5"/>
                                <text x="45" y="92" class="axis-label" font-size="8">2a</text>
                                <line x1="62" y1="90" x2="72" y2="90" stroke="#10b981" stroke-width="1.5"/>
                                <text x="75" y="92" class="axis-label" font-size="8">2b</text>
                                <line x1="92" y1="90" x2="102" y2="90" stroke="#f59e0b" stroke-width="1.5"/>
                                <text x="105" y="92" class="axis-label" font-size="8">2c</text>

                                <!-- Deployment markers -->
                                <line x1="134" y1="20" x2="134" y2="80" class="deployment-line"/>
                                <line x1="228" y1="20" x2="228" y2="80" class="deployment-line"/>
                            </svg>
                        </div>

                        <div class="graph-card">
                            <div class="graph-title">Database Query Time</div>
                            <div class="metric-description">P99 PostgreSQL INSERT/UPDATE latency on cart_items table to RDS primary (db.r5.xlarge), synchronous replication to Multi-AZ standby</div>
                            <div class="graph-value healthy">24ms P99</div>
                            <svg class="graph-svg" viewBox="0 0 300 100">
                                <line x1="30" y1="20" x2="280" y2="20" class="grid-line"/>
                                <line x1="30" y1="50" x2="280" y2="50" class="grid-line"/>
                                <line x1="30" y1="80" x2="280" y2="80" class="grid-line"/>

                                <text x="25" y="83" text-anchor="end" class="axis-label">15</text>
                                <text x="25" y="53" text-anchor="end" class="axis-label">30</text>
                                <text x="25" y="23" text-anchor="end" class="axis-label">45</text>

                                <line x1="30" y1="30" x2="280" y2="30" class="alert-line"/>
                                <text x="282" y="32" class="threshold-label alert-label">40</text>

                                <line x1="30" y1="50" x2="280" y2="50" class="warn-line"/>
                                <text x="282" y="52" class="threshold-label warn-label">30</text>

                                <polyline fill="none" class="metric-line" stroke-width="2"
                                    points="30,66 60,64 90,68 120,65 150,67 180,65 210,69 240,66 270,68"/>

                                <!-- Deployment markers -->
                                <line x1="134" y1="20" x2="134" y2="80" class="deployment-line"/>
                                <line x1="228" y1="20" x2="228" y2="80" class="deployment-line"/>
                            </svg>
                        </div>

                        <div class="graph-card">
                            <div class="graph-title">Inventory Service Avail</div>
                            <div class="metric-description">P99 inventory check API latency (ECS Fargate) querying warehouse_stock table (RDS), includes reservation locking mechanism</div>
                            <div class="graph-value healthy">99.94%</div>
                            <svg class="graph-svg" viewBox="0 0 300 100">
                                <line x1="30" y1="20" x2="280" y2="20" class="grid-line"/>
                                <line x1="30" y1="50" x2="280" y2="50" class="grid-line"/>
                                <line x1="30" y1="80" x2="280" y2="80" class="grid-line"/>

                                <text x="25" y="83" text-anchor="end" class="axis-label">99.0</text>
                                <text x="25" y="53" text-anchor="end" class="axis-label">99.5</text>
                                <text x="25" y="23" text-anchor="end" class="axis-label">100</text>

                                <line x1="30" y1="68" x2="280" y2="68" class="alert-line"/>
                                <text x="282" y="70" class="threshold-label alert-label">99.3</text>

                                <line x1="30" y1="44" x2="280" y2="44" class="warn-line"/>
                                <text x="282" y="46" class="threshold-label warn-label">99.6</text>

                                <polyline fill="none" class="metric-line" stroke-width="2"
                                    points="30,28 60,27 90,29 120,27 150,28 180,26 210,29 240,27 270,28"/>

                                <!-- Deployment markers -->
                                <line x1="134" y1="20" x2="134" y2="80" class="deployment-line"/>
                                <line x1="228" y1="20" x2="228" y2="80" class="deployment-line"/>
                            </svg>
                        </div>

                        <div class="graph-card">
                            <div class="graph-title">Pricing Service</div>
                            <div class="metric-description">P99 Lambda function duration for pricing calculation including promotional rules engine, 1GB memory, Python 3.11 runtime</div>
                            <div class="graph-value healthy">34ms P99</div>
                            <svg class="graph-svg" viewBox="0 0 300 100">
                                <line x1="30" y1="20" x2="280" y2="20" class="grid-line"/>
                                <line x1="30" y1="50" x2="280" y2="50" class="grid-line"/>
                                <line x1="30" y1="80" x2="280" y2="80" class="grid-line"/>

                                <text x="25" y="83" text-anchor="end" class="axis-label">20</text>
                                <text x="25" y="53" text-anchor="end" class="axis-label">50</text>
                                <text x="25" y="23" text-anchor="end" class="axis-label">80</text>

                                <line x1="30" y1="33" x2="280" y2="33" class="alert-line"/>
                                <text x="282" y="35" class="threshold-label alert-label">70</text>

                                <line x1="30" y1="43" x2="280" y2="43" class="warn-line"/>
                                <text x="282" y="45" class="threshold-label warn-label">55</text>

                                <polyline fill="none" class="metric-line" stroke-width="2"
                                    points="30,67 60,65 90,69 120,66 150,68 180,65 210,70 240,67 270,69"/>

                                <!-- Deployment markers -->
                                <line x1="134" y1="20" x2="134" y2="80" class="deployment-line"/>
                                <line x1="228" y1="20" x2="228" y2="80" class="deployment-line"/>
                            </svg>
                        </div>

                        <div class="graph-card">
                            <div class="graph-title">Product Options Cache</div>
                            <div class="metric-description">ElastiCache Redis cache hit rate for product variant data (size/color/SKU mappings), TTL=7200s, eviction policy=allkeys-lru</div>
                            <div class="graph-value healthy">92.1%</div>
                            <svg class="graph-svg" viewBox="0 0 300 100">
                                <line x1="30" y1="20" x2="280" y2="20" class="grid-line"/>
                                <line x1="30" y1="50" x2="280" y2="50" class="grid-line"/>
                                <line x1="30" y1="80" x2="280" y2="80" class="grid-line"/>

                                <text x="25" y="83" text-anchor="end" class="axis-label">75</text>
                                <text x="25" y="53" text-anchor="end" class="axis-label">87</text>
                                <text x="25" y="23" text-anchor="end" class="axis-label">100</text>

                                <line x1="30" y1="65" x2="280" y2="65" class="alert-line"/>
                                <text x="282" y="67" class="threshold-label alert-label">80</text>

                                <line x1="30" y1="50" x2="280" y2="50" class="warn-line"/>
                                <text x="282" y="52" class="threshold-label warn-label">87</text>

                                <polyline fill="none" class="metric-line" stroke-width="2"
                                    points="30,31 60,29 90,33 120,30 150,32 180,29 210,34 240,31 270,33"/>

                                <!-- Deployment markers -->
                                <line x1="134" y1="20" x2="134" y2="80" class="deployment-line"/>
                                <line x1="228" y1="20" x2="228" y2="80" class="deployment-line"/>
                            </svg>
                        </div>

                        <div class="graph-card">
                            <div class="graph-title">Auth Service Latency</div>
                            <div class="metric-description">P99 Lambda JWT token validation latency (RS256 algorithm), public key cached in ElastiCache, 512MB memory allocation</div>
                            <div class="graph-value healthy">15ms P99</div>
                            <svg class="graph-svg" viewBox="0 0 300 100">
                                <line x1="30" y1="20" x2="280" y2="20" class="grid-line"/>
                                <line x1="30" y1="50" x2="280" y2="50" class="grid-line"/>
                                <line x1="30" y1="80" x2="280" y2="80" class="grid-line"/>

                                <text x="25" y="83" text-anchor="end" class="axis-label">10</text>
                                <text x="25" y="53" text-anchor="end" class="axis-label">25</text>
                                <text x="25" y="23" text-anchor="end" class="axis-label">40</text>

                                <line x1="30" y1="33" x2="280" y2="33" class="alert-line"/>
                                <text x="282" y="35" class="threshold-label alert-label">35</text>

                                <line x1="30" y1="43" x2="280" y2="43" class="warn-line"/>
                                <text x="282" y="45" class="threshold-label warn-label">27</text>

                                <polyline fill="none" class="metric-line" stroke-width="2"
                                    points="30,70 60,68 90,72 120,69 150,71 180,68 210,73 240,70 270,72"/>

                                <!-- Deployment markers -->
                                <line x1="134" y1="20" x2="134" y2="80" class="deployment-line"/>
                                <line x1="228" y1="20" x2="228" y2="80" class="deployment-line"/>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 4: Complete Purchase -->
        <div class="journey-step">
            <div class="step-narrative">
                <div class="step-number">
                    <span class="step-badge">STEP 4</span>
                    <div class="traffic-light">
                        <div class="traffic-light-circle red"></div>
                        <div class="traffic-light-circle yellow active"></div>
                        <div class="traffic-light-circle green"></div>
                    </div>
                </div>
                <div class="step-title">Complete Purchase Flow</div>
                <div class="step-description">
                    Customers review their cart, enter shipping and payment information, and complete the checkout process. Orders are created and payment is processed.
                </div>
            </div>

            <div class="step-content">
                <div class="graphs-container">
                    <div class="hero-graph">
                        <div class="graph-card">
                            <div class="graph-title">Completed Purchases</div>
                            <div class="graph-value warning">201 /min</div>
                            <svg class="graph-svg" viewBox="0 0 600 280">
                                <line x1="50" y1="30" x2="580" y2="30" class="grid-line"/>
                                <line x1="50" y1="80" x2="580" y2="80" class="grid-line"/>
                                <line x1="50" y1="130" x2="580" y2="130" class="grid-line"/>
                                <line x1="50" y1="180" x2="580" y2="180" class="grid-line"/>
                                <line x1="50" y1="230" x2="580" y2="230" class="grid-line"/>

                                <text x="45" y="235" text-anchor="end" class="axis-label">150</text>
                                <text x="45" y="185" text-anchor="end" class="axis-label">200</text>
                                <text x="45" y="135" text-anchor="end" class="axis-label">250</text>
                                <text x="45" y="85" text-anchor="end" class="axis-label">300</text>
                                <text x="45" y="35" text-anchor="end" class="axis-label">350</text>

                                <line x1="50" y1="207" x2="580" y2="207" class="alert-line" stroke-width="2"/>
                                <text x="582" y="210" class="threshold-label alert-label">180</text>

                                <line x1="50" y1="180" x2="580" y2="180" class="warn-line" stroke-width="2"/>
                                <text x="582" y="183" class="threshold-label warn-label">200</text>

                                <polyline fill="none" class="metric-line" stroke-width="2"
                                    points="50,145 80,140 110,137 140,134 170,138 200,143 230,150 260,158 290,170 320,176 350,180 380,183 410,186 440,189 470,187 500,185 530,183 560,181 580,180"/>

                                <!-- Deployment markers -->
                                <line x1="271" y1="30" x2="271" y2="250" class="deployment-line"/>
                                <line x1="470" y1="30" x2="470" y2="250" class="deployment-line"/>

                                <text x="80" y="260" text-anchor="middle" class="axis-label">00:00</text>
                                <text x="200" y="260" text-anchor="middle" class="axis-label">02:00</text>
                                <text x="320" y="260" text-anchor="middle" class="axis-label">04:00</text>
                                <text x="440" y="260" text-anchor="middle" class="axis-label">06:00</text>
                                <text x="560" y="260" text-anchor="middle" class="axis-label">now</text>
                            </svg>
                            <div class="legend">
                                <div class="legend-item">
                                    <div class="legend-line" style="background: #1d8102;"></div>
                                    <span>Current</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-line" style="background: #ff9900;"></div>
                                    <span>Warn</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-line" style="background: #d13212;"></div>
                                    <span>Alert</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-line" style="background: #5dade2;"></div>
                                    <span>Deployment</span>
                                </div>
                            </div>
                        </div>

                        <div class="architecture-description">
                            <strong>Architecture:</strong> Checkout orchestrates multiple services: Order service coordinates the transaction, calling external payment gateway (Stripe/Braintree), tax calculation API (Avalara), shipping rate calculator, fraud detection ML service, address validation, email confirmation (SES), and promo code validation. Payment gateway degradation impacts overall checkout health.
                        </div>

                        <div class="architecture-diagram">
                            <svg width="100%" height="160" viewBox="0 0 650 160">
                                <defs>
                                    <marker id="arrowhead4" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto">
                                        <polygon points="0 0, 6 3, 0 6" fill="#687078" />
                                    </marker>
                                </defs>

                                <!-- Arrows (render first, behind boxes) -->
                                <line x1="110" y1="72" x2="140" y2="20" stroke="#687078" stroke-width="1.5" marker-end="url(#arrowhead4)"/>
                                <line x1="110" y1="75" x2="140" y2="60" stroke="#687078" stroke-width="1.5" marker-end="url(#arrowhead4)"/>
                                <line x1="110" y1="82" x2="140" y2="100" stroke="#687078" stroke-width="1.5" marker-end="url(#arrowhead4)"/>
                                <line x1="110" y1="88" x2="140" y2="140" stroke="#687078" stroke-width="1.5" marker-end="url(#arrowhead4)"/>
                                <line x1="110" y1="76" x2="280" y2="40" stroke="#687078" stroke-width="1.5" marker-end="url(#arrowhead4)"/>
                                <line x1="110" y1="80" x2="280" y2="80" stroke="#687078" stroke-width="1.5" marker-end="url(#arrowhead4)"/>
                                <line x1="110" y1="84" x2="280" y2="120" stroke="#687078" stroke-width="1.5" marker-end="url(#arrowhead4)"/>
                                <line x1="110" y1="80" x2="430" y2="80" stroke="#687078" stroke-width="1.5" marker-end="url(#arrowhead4)"/>

                                <!-- Boxes -->
                                <rect x="10" y="65" width="100" height="30" fill="none" stroke="#ec7211" stroke-width="2" rx="3"/>
                                <text x="60" y="85" text-anchor="middle" fill="#ec7211" font-size="10">Order Svc (Lambda)</text>

                                <rect x="140" y="5" width="110" height="30" fill="none" stroke="#ff9900" stroke-width="2" rx="3"/>
                                <text x="195" y="25" text-anchor="middle" fill="#ff9900" font-size="10">Payment (Stripe API)</text>

                                <rect x="140" y="45" width="110" height="30" fill="none" stroke="#3f4f5f" stroke-width="2" rx="3"/>
                                <text x="195" y="65" text-anchor="middle" fill="#aab7b8" font-size="10">Tax (Avalara API)</text>

                                <rect x="140" y="85" width="110" height="30" fill="none" stroke="#3f4f5f" stroke-width="2" rx="3"/>
                                <text x="195" y="105" text-anchor="middle" fill="#aab7b8" font-size="10">Shipping (Lambda)</text>

                                <rect x="140" y="125" width="110" height="30" fill="none" stroke="#3f4f5f" stroke-width="2" rx="3"/>
                                <text x="195" y="145" text-anchor="middle" fill="#aab7b8" font-size="10">Fraud (SageMaker)</text>

                                <rect x="280" y="25" width="120" height="30" fill="none" stroke="#3f4f5f" stroke-width="2" rx="3"/>
                                <text x="340" y="45" text-anchor="middle" fill="#aab7b8" font-size="10">Address (USPS API)</text>

                                <rect x="280" y="65" width="120" height="30" fill="none" stroke="#3f4f5f" stroke-width="2" rx="3"/>
                                <text x="340" y="85" text-anchor="middle" fill="#aab7b8" font-size="10">Email (SES)</text>

                                <rect x="280" y="105" width="120" height="30" fill="none" stroke="#3f4f5f" stroke-width="2" rx="3"/>
                                <text x="340" y="125" text-anchor="middle" fill="#aab7b8" font-size="10">Promo Svc (DynamoDB)</text>

                                <rect x="430" y="65" width="90" height="30" fill="none" stroke="#3f4f5f" stroke-width="2" rx="3"/>
                                <text x="475" y="85" text-anchor="middle" fill="#aab7b8" font-size="10">Order DB (RDS)</text>
                            </svg>
                        </div>

                        <div class="recent-events-title">Recent Events:</div>
                        <div class="recent-events">11/06, 8:45a - ONGOING - Stripe API elevated error rate (4.2% vs baseline 0.8%), order completion at 96.1%, monitoring
10/23, 11:05a - 2:32p - Avalara outage reduced order completion by 5%, RCA-201510
10/21, 5:15p - 7:40p - Fraud detection SageMaker endpoint timeout spike (3s+), orders delayed, RCA-201495
10/14, 2:00a - 2:45a - Order service DynamoDB throttling during deployment, RCA-201448</div>
                    </div>

                    <div class="dependency-graphs">
                        <div class="graph-card">
                            <div class="graph-title">Payment Gateway Success</div>
                            <div class="metric-description">Stripe Payment Intents API success rate (HTTP 2xx / total requests), currently elevated 4xx error rate, baseline target >99.2%</div>
                            <div class="graph-value warning">98.7%</div>
                            <svg class="graph-svg" viewBox="0 0 300 100">
                                <line x1="30" y1="20" x2="280" y2="20" class="grid-line"/>
                                <line x1="30" y1="50" x2="280" y2="50" class="grid-line"/>
                                <line x1="30" y1="80" x2="280" y2="80" class="grid-line"/>

                                <text x="25" y="83" text-anchor="end" class="axis-label">97.0</text>
                                <text x="25" y="53" text-anchor="end" class="axis-label">98.5</text>
                                <text x="25" y="23" text-anchor="end" class="axis-label">100</text>

                                <line x1="30" y1="63" x2="280" y2="63" class="alert-line"/>
                                <text x="282" y="65" class="threshold-label alert-label">98.0</text>

                                <line x1="30" y1="37" x2="280" y2="37" class="warn-line"/>
                                <text x="282" y="39" class="threshold-label warn-label">99.0</text>

                                <polyline fill="none" stroke="#ff9900" stroke-width="2"
                                    points="30,30 60,32 90,35 120,40 150,43 180,46 210,48 240,50 270,49"/>

                                <!-- Deployment markers -->
                                <line x1="134" y1="20" x2="134" y2="80" class="deployment-line"/>
                                <line x1="228" y1="20" x2="228" y2="80" class="deployment-line"/>
                            </svg>
                        </div>

                        <div class="graph-card">
                            <div class="graph-title">Order Service Latency</div>
                            <div class="metric-description">P99 Lambda order processing function duration (Node.js 18.x, 2GB memory), orchestrates payment/tax/fraud/shipping calls with circuit breakers</div>
                            <div class="graph-value healthy">156ms P99</div>
                            <svg class="graph-svg" viewBox="0 0 300 100">
                                <line x1="30" y1="20" x2="280" y2="20" class="grid-line"/>
                                <line x1="30" y1="50" x2="280" y2="50" class="grid-line"/>
                                <line x1="30" y1="80" x2="280" y2="80" class="grid-line"/>

                                <text x="25" y="83" text-anchor="end" class="axis-label">100</text>
                                <text x="25" y="53" text-anchor="end" class="axis-label">175</text>
                                <text x="25" y="23" text-anchor="end" class="axis-label">250</text>

                                <line x1="30" y1="32" x2="280" y2="32" class="alert-line"/>
                                <text x="282" y="34" class="threshold-label alert-label">220</text>

                                <line x1="30" y1="47" x2="280" y2="47" class="warn-line"/>
                                <text x="282" y="49" class="threshold-label warn-label">180</text>

                                <!-- Per-AZ lines -->
                                <polyline fill="none" stroke="#3b82f6" stroke-width="1.5" opacity="0.8"
                                    points="30,61 60,59 90,63 120,60 150,62 180,59 210,64 240,61 270,63"/>
                                <polyline fill="none" stroke="#10b981" stroke-width="1.5" opacity="0.8"
                                    points="30,59 60,57 90,61 120,58 150,60 180,57 210,62 240,59 270,61"/>
                                <polyline fill="none" stroke="#f59e0b" stroke-width="1.5" opacity="0.8"
                                    points="30,57 60,55 90,59 120,56 150,58 180,55 210,60 240,57 270,59"/>

                                <!-- Legend -->
                                <line x1="32" y1="90" x2="42" y2="90" stroke="#3b82f6" stroke-width="1.5"/>
                                <text x="45" y="92" class="axis-label" font-size="8">2a</text>
                                <line x1="62" y1="90" x2="72" y2="90" stroke="#10b981" stroke-width="1.5"/>
                                <text x="75" y="92" class="axis-label" font-size="8">2b</text>
                                <line x1="92" y1="90" x2="102" y2="90" stroke="#f59e0b" stroke-width="1.5"/>
                                <text x="105" y="92" class="axis-label" font-size="8">2c</text>

                                <!-- Deployment markers -->
                                <line x1="134" y1="20" x2="134" y2="80" class="deployment-line"/>
                                <line x1="228" y1="20" x2="228" y2="80" class="deployment-line"/>
                            </svg>
                        </div>

                        <div class="graph-card">
                            <div class="graph-title">Database Query Time</div>
                            <div class="metric-description">P99 PostgreSQL INSERT latency on orders table (RDS primary db.r5.xlarge), includes transaction commit with ACID guarantees, Multi-AZ</div>
                            <div class="graph-value healthy">26ms P99</div>
                            <svg class="graph-svg" viewBox="0 0 300 100">
                                <line x1="30" y1="20" x2="280" y2="20" class="grid-line"/>
                                <line x1="30" y1="50" x2="280" y2="50" class="grid-line"/>
                                <line x1="30" y1="80" x2="280" y2="80" class="grid-line"/>

                                <text x="25" y="83" text-anchor="end" class="axis-label">15</text>
                                <text x="25" y="53" text-anchor="end" class="axis-label">30</text>
                                <text x="25" y="23" text-anchor="end" class="axis-label">45</text>

                                <line x1="30" y1="30" x2="280" y2="30" class="alert-line"/>
                                <text x="282" y="32" class="threshold-label alert-label">40</text>

                                <line x1="30" y1="50" x2="280" y2="50" class="warn-line"/>
                                <text x="282" y="52" class="threshold-label warn-label">30</text>

                                <polyline fill="none" class="metric-line" stroke-width="2"
                                    points="30,64 60,62 90,66 120,63 150,65 180,63 210,67 240,64 270,66"/>

                                <!-- Deployment markers -->
                                <line x1="134" y1="20" x2="134" y2="80" class="deployment-line"/>
                                <line x1="228" y1="20" x2="228" y2="80" class="deployment-line"/>
                            </svg>
                        </div>

                        <div class="graph-card">
                            <div class="graph-title">Email Service Avail</div>
                            <div class="metric-description">SES email delivery success rate for order confirmations, SQS queue buffering, includes bounce/complaint tracking, target >99.5%</div>
                            <div class="graph-value healthy">99.98%</div>
                            <svg class="graph-svg" viewBox="0 0 300 100">
                                <line x1="30" y1="20" x2="280" y2="20" class="grid-line"/>
                                <line x1="30" y1="50" x2="280" y2="50" class="grid-line"/>
                                <line x1="30" y1="80" x2="280" y2="80" class="grid-line"/>

                                <text x="25" y="83" text-anchor="end" class="axis-label">99.0</text>
                                <text x="25" y="53" text-anchor="end" class="axis-label">99.5</text>
                                <text x="25" y="23" text-anchor="end" class="axis-label">100</text>

                                <line x1="30" y1="68" x2="280" y2="68" class="alert-line"/>
                                <text x="282" y="70" class="threshold-label alert-label">99.3</text>

                                <line x1="30" y1="44" x2="280" y2="44" class="warn-line"/>
                                <text x="282" y="46" class="threshold-label warn-label">99.6</text>

                                <polyline fill="none" class="metric-line" stroke-width="2"
                                    points="30,21 60,20 90,22 120,21 150,22 180,20 210,22 240,21 270,22"/>

                                <!-- Deployment markers -->
                                <line x1="134" y1="20" x2="134" y2="80" class="deployment-line"/>
                                <line x1="228" y1="20" x2="228" y2="80" class="deployment-line"/>
                            </svg>
                        </div>

                        <div class="graph-card">
                            <div class="graph-title">Tax Calculation API</div>
                            <div class="metric-description">P99 Avalara AvaTax REST API response time for tax calculation requests, includes jurisdiction lookup and rate calculation</div>
                            <div class="graph-value healthy">89ms P99</div>
                            <svg class="graph-svg" viewBox="0 0 300 100">
                                <line x1="30" y1="20" x2="280" y2="20" class="grid-line"/>
                                <line x1="30" y1="50" x2="280" y2="50" class="grid-line"/>
                                <line x1="30" y1="80" x2="280" y2="80" class="grid-line"/>

                                <text x="25" y="83" text-anchor="end" class="axis-label">60</text>
                                <text x="25" y="53" text-anchor="end" class="axis-label">120</text>
                                <text x="25" y="23" text-anchor="end" class="axis-label">180</text>

                                <line x1="30" y1="35" x2="280" y2="35" class="alert-line"/>
                                <text x="282" y="37" class="threshold-label alert-label">160</text>

                                <line x1="30" y1="45" x2="280" y2="45" class="warn-line"/>
                                <text x="282" y="47" class="threshold-label warn-label">130</text>

                                <polyline fill="none" class="metric-line" stroke-width="2"
                                    points="30,64 60,62 90,66 120,63 150,65 180,62 210,67 240,64 270,66"/>

                                <!-- Deployment markers -->
                                <line x1="134" y1="20" x2="134" y2="80" class="deployment-line"/>
                                <line x1="228" y1="20" x2="228" y2="80" class="deployment-line"/>
                            </svg>
                        </div>

                        <div class="graph-card">
                            <div class="graph-title">Shipping Calculator</div>
                            <div class="metric-description">P99 Lambda shipping calculator duration calling UPS/FedEx/USPS rate APIs in parallel, returns lowest rate, 1.5GB memory</div>
                            <div class="graph-value healthy">112ms P99</div>
                            <svg class="graph-svg" viewBox="0 0 300 100">
                                <line x1="30" y1="20" x2="280" y2="20" class="grid-line"/>
                                <line x1="30" y1="50" x2="280" y2="50" class="grid-line"/>
                                <line x1="30" y1="80" x2="280" y2="80" class="grid-line"/>

                                <text x="25" y="83" text-anchor="end" class="axis-label">70</text>
                                <text x="25" y="53" text-anchor="end" class="axis-label">140</text>
                                <text x="25" y="23" text-anchor="end" class="axis-label">210</text>

                                <line x1="30" y1="34" x2="280" y2="34" class="alert-line"/>
                                <text x="282" y="36" class="threshold-label alert-label">180</text>

                                <line x1="30" y1="44" x2="280" y2="44" class="warn-line"/>
                                <text x="282" y="46" class="threshold-label warn-label">150</text>

                                <polyline fill="none" class="metric-line" stroke-width="2"
                                    points="30,60 60,58 90,62 120,59 150,61 180,58 210,63 240,60 270,62"/>

                                <!-- Deployment markers -->
                                <line x1="134" y1="20" x2="134" y2="80" class="deployment-line"/>
                                <line x1="228" y1="20" x2="228" y2="80" class="deployment-line"/>
                            </svg>
                        </div>

                        <div class="graph-card">
                            <div class="graph-title">Fraud Detection</div>
                            <div class="metric-description">P99 SageMaker fraud detection model inference latency (XGBoost classifier, ml.c5.xlarge endpoint), risk score 0-1000</div>
                            <div class="graph-value healthy">234ms P99</div>
                            <svg class="graph-svg" viewBox="0 0 300 100">
                                <line x1="30" y1="20" x2="280" y2="20" class="grid-line"/>
                                <line x1="30" y1="50" x2="280" y2="50" class="grid-line"/>
                                <line x1="30" y1="80" x2="280" y2="80" class="grid-line"/>

                                <text x="25" y="83" text-anchor="end" class="axis-label">150</text>
                                <text x="25" y="53" text-anchor="end" class="axis-label">300</text>
                                <text x="25" y="23" text-anchor="end" class="axis-label">450</text>

                                <line x1="30" y1="32" x2="280" y2="32" class="alert-line"/>
                                <text x="282" y="34" class="threshold-label alert-label">400</text>

                                <line x1="30" y1="42" x2="280" y2="42" class="warn-line"/>
                                <text x="282" y="44" class="threshold-label warn-label">330</text>

                                <polyline fill="none" class="metric-line" stroke-width="2"
                                    points="30,64 60,62 90,66 120,63 150,65 180,62 210,67 240,64 270,66"/>

                                <!-- Deployment markers -->
                                <line x1="134" y1="20" x2="134" y2="80" class="deployment-line"/>
                                <line x1="228" y1="20" x2="228" y2="80" class="deployment-line"/>
                            </svg>
                        </div>

                        <div class="graph-card">
                            <div class="graph-title">Address Validation</div>
                            <div class="metric-description">P99 USPS Address Validation API response time for address standardization and ZIP+4 lookup, timeout=1500ms</div>
                            <div class="graph-value healthy">67ms P99</div>
                            <svg class="graph-svg" viewBox="0 0 300 100">
                                <line x1="30" y1="20" x2="280" y2="20" class="grid-line"/>
                                <line x1="30" y1="50" x2="280" y2="50" class="grid-line"/>
                                <line x1="30" y1="80" x2="280" y2="80" class="grid-line"/>

                                <text x="25" y="83" text-anchor="end" class="axis-label">40</text>
                                <text x="25" y="53" text-anchor="end" class="axis-label">80</text>
                                <text x="25" y="23" text-anchor="end" class="axis-label">120</text>

                                <line x1="30" y1="35" x2="280" y2="35" class="alert-line"/>
                                <text x="282" y="37" class="threshold-label alert-label">105</text>

                                <line x1="30" y1="47" x2="280" y2="47" class="warn-line"/>
                                <text x="282" y="49" class="threshold-label warn-label">85</text>

                                <polyline fill="none" class="metric-line" stroke-width="2"
                                    points="30,66 60,64 90,68 120,65 150,67 180,64 210,69 240,66 270,68"/>

                                <!-- Deployment markers -->
                                <line x1="134" y1="20" x2="134" y2="80" class="deployment-line"/>
                                <line x1="228" y1="20" x2="228" y2="80" class="deployment-line"/>
                            </svg>
                        </div>

                        <div class="graph-card">
                            <div class="graph-title">Promo Code Service</div>
                            <div class="metric-description">P99 promo code validation latency querying DynamoDB promo_codes table (GSI on code field), Redis cache for active codes</div>
                            <div class="graph-value healthy">45ms P99</div>
                            <svg class="graph-svg" viewBox="0 0 300 100">
                                <line x1="30" y1="20" x2="280" y2="20" class="grid-line"/>
                                <line x1="30" y1="50" x2="280" y2="50" class="grid-line"/>
                                <line x1="30" y1="80" x2="280" y2="80" class="grid-line"/>

                                <text x="25" y="83" text-anchor="end" class="axis-label">25</text>
                                <text x="25" y="53" text-anchor="end" class="axis-label">60</text>
                                <text x="25" y="23" text-anchor="end" class="axis-label">95</text>

                                <line x1="30" y1="34" x2="280" y2="34" class="alert-line"/>
                                <text x="282" y="36" class="threshold-label alert-label">80</text>

                                <line x1="30" y1="45" x2="280" y2="45" class="warn-line"/>
                                <text x="282" y="47" class="threshold-label warn-label">65</text>

                                <polyline fill="none" class="metric-line" stroke-width="2"
                                    points="30,65 60,63 90,67 120,64 150,66 180,63 210,68 240,65 270,67"/>

                                <!-- Deployment markers -->
                                <line x1="134" y1="20" x2="134" y2="80" class="deployment-line"/>
                                <line x1="228" y1="20" x2="228" y2="80" class="deployment-line"/>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>